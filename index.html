<!DOCTYPE html><html><head><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><link rel="stylesheet" type="text/css" href="/css/normalize.css"><link rel="stylesheet" type="text/css" href="/css/highlight.css"><link rel="stylesheet" type="text/css" href="/css/noise.css"><title>linkpwd| | linkpwd's blog 自留地</title><link rel="Shortcut Icon" type="image/x-icon" href="/favicon.ico"><meta name="generator" content="Hexo 5.4.0"></head><body><header class="wrapper header"><div class="container blog-title"><a class="title" id="logo" href="/.">linkpwd|</a><span class="subtitle">linkpwd's blog 自留地</span><label id="toggle-menu" for="menu" onclick><i class="fa fa-bars"></i></label></div><input id="menu" type="checkbox"><div class="container nav-items"><a class="sidebar-nav-item active" href="/">主页</a><a class="sidebar-nav-item" href="/archives">归档</a></div></header><article class="wrapper"><div class="container entries" id="index-main"><div class="post-entry"><div class="post-desc"><div class="post-title"><a href="/2021/12/30/about-me/">About Me</a></div><div class="post-content"><h3 id="关于我"><a href="#关于我" class="headerlink" title="关于我"></a>关于我</h3><h3 id="联系方式"><a href="#联系方式" class="headerlink" title="联系方式"></a>联系方式</h3><ul>
<li>微信公众号</li>
<li>zhihu</li>
<li>xie</li>
<li>linkpwd</li>
</ul>
</div><div class="post-meta"><div class="post-time">2021-12-30</div></div></div></div><div class="post-entry"><div class="post-desc"><div class="post-title"><a href="/2021/12/30/windows-run-linux-tools/">windows下运行linux命令的几个工具</a></div><div class="post-content"><p>使用windows系统，但是想使用linux的一些命令，WSL是个不错的选择，但是觉得它包也大，安装上整个系统也变得慢了（可能错觉）。下面有相应的几个工具，对比一下Cygwin, MSYS2</p></div><div class="post-meta"><div class="post-time">2021-12-30</div></div></div></div><div class="post-entry"><div class="post-desc"><div class="post-title"><a href="/2021/12/23/jenkins-k8s-install/">jenkins k8s环境安装部署迁移</a></div><div class="post-content"><h3 id="前置"><a href="#前置" class="headerlink" title="前置"></a>前置</h3><p>接入新的k8s集群中，老集群不再需要，进行迁移</p></div><div class="post-meta"><div class="post-time">2021-12-23</div></div></div></div><div class="post-entry"><div class="post-desc"><div class="post-title"><a href="/2021/12/23/elk-log-k8s-install/">ELK日志系统K8S部署</a></div><div class="post-content"><p>elasticsearch作为搜索的标配，有着很多的使用场景。 之前有搭建过单机版的elasticsearch，现在搭建集群版本的elasticsearch</p></div><div class="post-meta"><div class="post-time">2021-12-23</div></div></div></div><div class="post-entry"><div class="post-desc"><div class="post-title"><a href="/2021/12/14/elk-log-config/">ELK日志系统配置优化</a></div><div class="post-content"><p>ELK日志系统配置优化,ELK系统配置还算是挺多的，各个input output之间输入输出的，初学者可能会对其中一些配置不知如何下手。如不使用logstash如何配置等，如使用input redis , output elastic等</p></div><div class="post-meta"><div class="post-time">2021-12-14</div></div></div></div><div class="post-entry"><div class="post-desc"><div class="post-title"><a href="/2021/12/14/elk-log-performance/">ELK日志系统性能优化</a></div><div class="post-content"><h3 id="一、问题："><a href="#一、问题：" class="headerlink" title="一、问题："></a>一、问题：</h3><p>ELK日志系统延时严重，redis经常是内存使用率100%</p></div><div class="post-meta"><div class="post-time">2021-12-14</div></div></div></div><div class="post-entry"><div class="post-desc"><div class="post-title"><a href="/2021/12/06/websocket/">WebSocket服务部署</a></div><div class="post-content"><h3 id="配置文件，使支持websocket协议"><a href="#配置文件，使支持websocket协议" class="headerlink" title="配置文件，使支持websocket协议"></a>配置文件，使支持websocket协议</h3><p><a target="_blank" rel="noopener" href="https://www.nginx.com/blog/websocket-nginx/">websocket-nginx</a></p></div><div class="post-meta"><div class="post-time">2021-12-06</div></div></div></div><div class="post-entry"><div class="post-desc"><div class="post-title"><a href="/2021/12/06/loki-install-k8s/">k8s环境中loki安装部署</a></div><div class="post-content"><p>ELK这套日志系统相对来说还是太重了，安装部署过程也不简单，消耗的CPU、内存资源也较大。而loki则轻量级，且是根据prometheus思想开发的，消耗资源也很小。以下用它来采集下日志。</p></div><div class="post-meta"><div class="post-time">2021-12-06</div></div></div></div><div class="post-entry"><div class="post-desc"><div class="post-title"><a href="/2021/11/17/public-network/">公网IP地址查询方法</a></div><div class="post-content"><p>查公网ip的一些链接，以前有一些，当然自己也可以使用nginx return,主要内容来自aliyun文档，记录收藏一下</p></div><div class="post-meta"><div class="post-time">2021-11-17</div></div></div></div><div class="post-entry"><div class="post-desc"><div class="post-title"><a href="/2021/11/09/elasticsearch-docker/">elasticsearch单机docker版</a></div><div class="post-content"><h3 id="拉取镜像，设置目录和环境变量并运行"><a href="#拉取镜像，设置目录和环境变量并运行" class="headerlink" title="拉取镜像，设置目录和环境变量并运行"></a>拉取镜像，设置目录和环境变量并运行</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">docker run -p 29200:9200 -p 29300:9300 --name elasticsearch --restart=always \</span><br><span class="line">   -e <span class="string">&quot;discovery.type=single-node&quot;</span> \</span><br><span class="line">   -e <span class="string">&quot;cluster.name=elasticsearch&quot;</span> \</span><br><span class="line">   -v /mnt/elasticsearch/plugins:/usr/share/elasticsearch/plugins \</span><br><span class="line">   -v /mnt/elasticsearch/data:/usr/share/elasticsearch/data \</span><br><span class="line">   -d  elastic/elasticsearch:7.10.2</span><br></pre></td></tr></table></figure>

<br/>

<h3 id="需要在配置文件中开启x-pack验证-修改config目录下面的elasticsearch-yml文件，在里面添加如下内容-并重启"><a href="#需要在配置文件中开启x-pack验证-修改config目录下面的elasticsearch-yml文件，在里面添加如下内容-并重启" class="headerlink" title="需要在配置文件中开启x-pack验证, 修改config目录下面的elasticsearch.yml文件，在里面添加如下内容,并重启."></a>需要在配置文件中开启x-pack验证, 修改config目录下面的elasticsearch.yml文件，在里面添加如下内容,并重启.</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">xpack.security.enabled: <span class="literal">true</span></span><br><span class="line">xpack.license.self_generated.type: basic</span><br><span class="line">xpack.security.transport.ssl.enabled: <span class="literal">true</span></span><br></pre></td></tr></table></figure>


<br/>

<h3 id="执行设置用户名和密码的命令-这里需要为4个用户分别设置密码，elastic-kibana-logstash-system-beats-system"><a href="#执行设置用户名和密码的命令-这里需要为4个用户分别设置密码，elastic-kibana-logstash-system-beats-system" class="headerlink" title="执行设置用户名和密码的命令,这里需要为4个用户分别设置密码，elastic, kibana, logstash_system,beats_system"></a>执行设置用户名和密码的命令,这里需要为4个用户分别设置密码，elastic, kibana, logstash_system,beats_system</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">bin/elasticsearch-setup-passwords interactive</span><br><span class="line">Initiating the setup of passwords <span class="keyword">for</span> reserved users elastic,apm_system,kibana,kibana_system,logstash_system,beats_system,remote_monitoring_user.</span><br><span class="line">You will be prompted to enter passwords as the process progresses.</span><br><span class="line">Please confirm that you would like to <span class="built_in">continue</span> [y/N]y</span><br><span class="line"></span><br><span class="line">Enter password <span class="keyword">for</span> [elastic]: </span><br><span class="line">Reenter password <span class="keyword">for</span> [elastic]: </span><br><span class="line">Enter password <span class="keyword">for</span> [apm_system]: </span><br><span class="line">Reenter password <span class="keyword">for</span> [apm_system]: </span><br><span class="line">Enter password <span class="keyword">for</span> [kibana_system]: </span><br><span class="line">Reenter password <span class="keyword">for</span> [kibana_system]: </span><br><span class="line">Enter password <span class="keyword">for</span> [logstash_system]: </span><br><span class="line">Reenter password <span class="keyword">for</span> [logstash_system]: </span><br><span class="line">Enter password <span class="keyword">for</span> [beats_system]: </span><br><span class="line">Reenter password <span class="keyword">for</span> [beats_system]: </span><br><span class="line">Enter password <span class="keyword">for</span> [remote_monitoring_user]: </span><br><span class="line">Reenter password <span class="keyword">for</span> [remote_monitoring_user]: </span><br><span class="line">Changed password <span class="keyword">for</span> user [apm_system]</span><br><span class="line">Changed password <span class="keyword">for</span> user [kibana_system]</span><br><span class="line">Changed password <span class="keyword">for</span> user [kibana]</span><br><span class="line">Changed password <span class="keyword">for</span> user [logstash_system]</span><br><span class="line">Changed password <span class="keyword">for</span> user [beats_system]</span><br><span class="line">Changed password <span class="keyword">for</span> user [remote_monitoring_user]</span><br><span class="line">Changed password <span class="keyword">for</span> user [elastic]</span><br></pre></td></tr></table></figure>

<br/>

<h3 id="修改密码的方式："><a href="#修改密码的方式：" class="headerlink" title="修改密码的方式："></a>修改密码的方式：</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">curl -H <span class="string">&quot;Content-Type:application/json&quot;</span> -XPOST -u elastic <span class="string">&#x27;http://127.0.0.1:9200/_xpack/security/user/elastic/_password&#x27;</span> -d <span class="string">&#x27;&#123; &quot;password&quot; : &quot;mypassword&quot; &#125;&#x27;</span></span><br></pre></td></tr></table></figure>
</div><div class="post-meta"><div class="post-time">2021-11-09</div></div></div></div></div></article><div class="wrapper page-navigator-wrapper"><div class="page-navigator"><span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="extend next" rel="next" href="/page/2/">Next »</a></div></div><footer class="footer wrapper"><div class="social"></div><div class="footer-content">© 2021 <a href="/" rel="nofollow">linkpwd|</a>. Powered by <a rel="nofollow" target="_blank" href="https://hexo.io">Hexo</a>. Theme <a target="_blank" href="https://github.com/lotabout/hexo-theme-noise">noise</a>.</div></footer><link rel="stylesheet" type="text/css" href="/css/font.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/font-awesome/4.5.0/css/font-awesome.min.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/fancybox/2.1.5/jquery.fancybox.css"><script src="//cdn.bootcss.com/jquery/2.0.3/jquery.min.js"></script><script src="//cdn.bootcss.com/fancybox/2.1.5/jquery.fancybox.pack.js"></script><script>$(document).ready(function() {
  $(".fancybox").fancybox();
});
</script></body></html>