<!DOCTYPE html><html><head><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description" content=" id=&quot;拉取镜像，设置目录和环境变量并运行&quot;&gt;&lt;a href=&quot;#拉取镜像，设置目录和环境变量并运行&quot; class=&quot;headerlink&quot; title=&quot;拉取镜像，设置目录和环境变量并运行&quot;&gt;&lt;/a&gt;拉取镜像，设置目录和环境变量并运行&lt;/h3&gt;&lt;p&gt;docker run -p 29200:9200 -p 29300:9300 –name elasticsearch –restart=always &lt;br&gt;   -e “discovery.type=single-node” &lt;br&gt;   -e “cluster.name=elasticsearch” &lt;br&gt;   -v /mnt/elasticsearch/plugins:/usr/share/elasticsearch/plugins &lt;br&gt;   -v /mnt/elasticsearch/data:/usr/share/elasticsearch/data &lt;br&gt;   -d  elastic/elasticsearch:7.10.2"><link rel="stylesheet" type="text/css" href="/css/normalize.css"><link rel="stylesheet" type="text/css" href="/css/highlight.css"><link rel="stylesheet" type="text/css" href="/css/noise.css"><title>elasticsearch单机docker版 | linkpwd|</title><link rel="Shortcut Icon" type="image/x-icon" href="/favicon.ico"><meta name="generator" content="Hexo 5.4.0"></head><body><article class="wrapper"><div class="post-main"><div class="nav"><nav class="container"><a class="sidebar-nav-item active" href="/">主页</a><a class="sidebar-nav-item" href="/archives">归档</a></nav><div class="container post-meta"><div class="post-time">2021-11-09</div></div></div><div class="container post-header"><h1>elasticsearch单机docker版</h1></div><div class="container post-toc"><details class="toc"><summary class="toc-accordion">目录</summary><ol class="toc"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%8B%89%E5%8F%96%E9%95%9C%E5%83%8F%EF%BC%8C%E8%AE%BE%E7%BD%AE%E7%9B%AE%E5%BD%95%E5%92%8C%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F%E5%B9%B6%E8%BF%90%E8%A1%8C"><span class="toc-number">1.</span> <span class="toc-text">拉取镜像，设置目录和环境变量并运行</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%9C%80%E8%A6%81%E5%9C%A8%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E4%B8%AD%E5%BC%80%E5%90%AFx-pack%E9%AA%8C%E8%AF%81-%E4%BF%AE%E6%94%B9config%E7%9B%AE%E5%BD%95%E4%B8%8B%E9%9D%A2%E7%9A%84elasticsearch-yml%E6%96%87%E4%BB%B6%EF%BC%8C%E5%9C%A8%E9%87%8C%E9%9D%A2%E6%B7%BB%E5%8A%A0%E5%A6%82%E4%B8%8B%E5%86%85%E5%AE%B9-%E5%B9%B6%E9%87%8D%E5%90%AF"><span class="toc-number">2.</span> <span class="toc-text">需要在配置文件中开启x-pack验证, 修改config目录下面的elasticsearch.yml文件，在里面添加如下内容,并重启.</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%89%A7%E8%A1%8C%E8%AE%BE%E7%BD%AE%E7%94%A8%E6%88%B7%E5%90%8D%E5%92%8C%E5%AF%86%E7%A0%81%E7%9A%84%E5%91%BD%E4%BB%A4-%E8%BF%99%E9%87%8C%E9%9C%80%E8%A6%81%E4%B8%BA4%E4%B8%AA%E7%94%A8%E6%88%B7%E5%88%86%E5%88%AB%E8%AE%BE%E7%BD%AE%E5%AF%86%E7%A0%81%EF%BC%8Celastic-kibana-logstash-system-beats-system"><span class="toc-number">3.</span> <span class="toc-text">执行设置用户名和密码的命令,这里需要为4个用户分别设置密码，elastic, kibana, logstash_system,beats_system</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BF%AE%E6%94%B9%E5%AF%86%E7%A0%81%E7%9A%84%E6%96%B9%E5%BC%8F%EF%BC%9A"><span class="toc-number">4.</span> <span class="toc-text">修改密码的方式：</span></a></li></ol></details></div><div class="container post-content"><h3 id="拉取镜像，设置目录和环境变量并运行"><a href="#拉取镜像，设置目录和环境变量并运行" class="headerlink" title="拉取镜像，设置目录和环境变量并运行"></a>拉取镜像，设置目录和环境变量并运行</h3><p>docker run -p 29200:9200 -p 29300:9300 –name elasticsearch –restart=always <br>   -e “discovery.type=single-node” <br>   -e “cluster.name=elasticsearch” <br>   -v /mnt/elasticsearch/plugins:/usr/share/elasticsearch/plugins <br>   -v /mnt/elasticsearch/data:/usr/share/elasticsearch/data <br>   -d  elastic/elasticsearch:7.10.2</p>
<br/>

<h3 id="需要在配置文件中开启x-pack验证-修改config目录下面的elasticsearch-yml文件，在里面添加如下内容-并重启"><a href="#需要在配置文件中开启x-pack验证-修改config目录下面的elasticsearch-yml文件，在里面添加如下内容-并重启" class="headerlink" title="需要在配置文件中开启x-pack验证, 修改config目录下面的elasticsearch.yml文件，在里面添加如下内容,并重启."></a>需要在配置文件中开启x-pack验证, 修改config目录下面的elasticsearch.yml文件，在里面添加如下内容,并重启.</h3><p>xpack.security.enabled: true<br>xpack.license.self_generated.type: basic<br>xpack.security.transport.ssl.enabled: true</p>
<br/>

<h3 id="执行设置用户名和密码的命令-这里需要为4个用户分别设置密码，elastic-kibana-logstash-system-beats-system"><a href="#执行设置用户名和密码的命令-这里需要为4个用户分别设置密码，elastic-kibana-logstash-system-beats-system" class="headerlink" title="执行设置用户名和密码的命令,这里需要为4个用户分别设置密码，elastic, kibana, logstash_system,beats_system"></a>执行设置用户名和密码的命令,这里需要为4个用户分别设置密码，elastic, kibana, logstash_system,beats_system</h3><p>bin/elasticsearch-setup-passwords interactive<br>Initiating the setup of passwords for reserved users elastic,apm_system,kibana,kibana_system,logstash_system,beats_system,remote_monitoring_user.<br>You will be prompted to enter passwords as the process progresses.<br>Please confirm that you would like to continue [y/N]y</p>
<p>Enter password for [elastic]:<br>Reenter password for [elastic]:<br>Enter password for [apm_system]:<br>Reenter password for [apm_system]:<br>Enter password for [kibana_system]:<br>Reenter password for [kibana_system]:<br>Enter password for [logstash_system]:<br>Reenter password for [logstash_system]:<br>Enter password for [beats_system]:<br>Reenter password for [beats_system]:<br>Enter password for [remote_monitoring_user]:<br>Reenter password for [remote_monitoring_user]:<br>Changed password for user [apm_system]<br>Changed password for user [kibana_system]<br>Changed password for user [kibana]<br>Changed password for user [logstash_system]<br>Changed password for user [beats_system]<br>Changed password for user [remote_monitoring_user]<br>Changed password for user [elastic]</p>
<br/>

<h3 id="修改密码的方式："><a href="#修改密码的方式：" class="headerlink" title="修改密码的方式："></a>修改密码的方式：</h3><p>curl -H “Content-Type:application/json” -XPOST -u elastic ‘<a target="_blank" rel="noopener" href="http://127.0.0.1:9200/_xpack/security/user/elastic/_password&#39;">http://127.0.0.1:9200/_xpack/security/user/elastic/_password&#39;</a> -d ‘{ “password” : “mypassword” }’</p>
</div></div><div class="post-main post-comment"></div></article><link rel="stylesheet" type="text/css" href="/css/font.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/font-awesome/4.5.0/css/font-awesome.min.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/fancybox/2.1.5/jquery.fancybox.css"><script src="//cdn.bootcss.com/jquery/2.0.3/jquery.min.js"></script><script src="//cdn.bootcss.com/fancybox/2.1.5/jquery.fancybox.pack.js"></script><script>$(document).ready(function() {
  $(".fancybox").fancybox();
});
</script></body></html>