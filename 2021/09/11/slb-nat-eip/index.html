<!DOCTYPE html><html><head><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description" content=" id=&quot;几个概念&quot;&gt;&lt;a href=&quot;#几个概念&quot; class=&quot;headerlink&quot; title=&quot;几个概念&quot;&gt;&lt;/a&gt;几个概念&lt;/h3&gt;&lt;p&gt;NAT: 网络地址转换，一般在路由器或者是网络的入口处对地址进行映射，缓解ip地址缺的问题&lt;br&gt;SLB: 负载均衡&lt;br&gt;EIP: 浮动的ip，可随时绑定解绑"><link rel="stylesheet" type="text/css" href="/css/normalize.css"><link rel="stylesheet" type="text/css" href="/css/highlight.css"><link rel="stylesheet" type="text/css" href="/css/noise.css"><title>slb与nat及eip的相关联 | linkpwd|</title><link rel="Shortcut Icon" type="image/x-icon" href="/favicon.ico"><meta name="generator" content="Hexo 5.4.0"></head><body><article class="wrapper"><div class="post-main"><div class="nav"><nav class="container"><a class="sidebar-nav-item active" href="/">主页</a><a class="sidebar-nav-item" href="/archives">归档</a></nav><div class="container post-meta"><div class="post-time">2021-09-11</div></div></div><div class="container post-header"><h1>slb与nat及eip的相关联</h1></div><div class="container post-toc"><details class="toc"><summary class="toc-accordion">目录</summary><ol class="toc"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%87%A0%E4%B8%AA%E6%A6%82%E5%BF%B5"><span class="toc-number">1.</span> <span class="toc-text">几个概念</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%AE%A4%E7%9F%A5%E8%AF%AF%E5%8C%BA"><span class="toc-number">2.</span> <span class="toc-text">认知误区</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%BD%91%E7%BB%9C%E6%91%98%E6%8A%84"><span class="toc-number">3.</span> <span class="toc-text">网络摘抄</span></a></li></ol></details></div><div class="container post-content"><h3 id="几个概念"><a href="#几个概念" class="headerlink" title="几个概念"></a>几个概念</h3><p>NAT: 网络地址转换，一般在路由器或者是网络的入口处对地址进行映射，缓解ip地址缺的问题<br>SLB: 负载均衡<br>EIP: 浮动的ip，可随时绑定解绑</p>
<h3 id="认知误区"><a href="#认知误区" class="headerlink" title="认知误区"></a>认知误区</h3><p>SLB支持DNAT，不支持SNAT， Nat既可以支持DNAT， 又可以支持SNAT。即SLB只允许外部服务访问，代理后端的服务，如果后端需要访问外部的网络，必须有外网IP。如果每台服务器配备公网IP成本太高，可使用NAT的snat功能到SLB，整个VPC/网段都共用一个出口公网IP，节约成本，但是注意其性能及带宽，可以绑定多个EIP。EIP的话可以灵活地绑定NAT及SLB。</p>
<h3 id="网络摘抄"><a href="#网络摘抄" class="headerlink" title="网络摘抄"></a>网络摘抄</h3><blockquote>
<p>有一种场景两种产品都需要用到，比如公网流量过来需要负载分发至内网服务器，同时内网服务器需要定时去公网抓取数据，就需要SLB做DNAT，Nat做SNAT。</p>
</blockquote>
<p><a target="_blank" rel="noopener" href="https://developer.aliyun.com/ask/128240?spm=a2c6h.13159736">负载均衡后端的无公网IP ECS可以通过负载均衡访问公网吗？</a><br>场景：负载均衡绑定EIP，把80端口的请求转发到后端两台无公网IP的ECS上，这种架构下，这两台ECS能否访问到公网，由ECS主动访问公网。</p>
<p>我自己做了测试，答案是不可以的，给大家做个反馈。不能通过负载均衡反向的话，就只能通过NAT网关或者弹性IP让只有内网IP的ECS访问公网。</p>
</div></div><div class="post-main post-comment"></div></article><link rel="stylesheet" type="text/css" href="/css/font.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/font-awesome/4.5.0/css/font-awesome.min.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/fancybox/2.1.5/jquery.fancybox.css"><script src="//cdn.bootcss.com/jquery/2.0.3/jquery.min.js"></script><script src="//cdn.bootcss.com/fancybox/2.1.5/jquery.fancybox.pack.js"></script><script>$(document).ready(function() {
  $(".fancybox").fancybox();
});
</script></body></html>